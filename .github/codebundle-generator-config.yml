# Codebundle Generator Configuration

# Labels that trigger codebundle generation
trigger_labels:
  - "auto-generate-codebundle"
  - "new-codebundle-request"

# Labels applied during processing
processing_labels:
  - "codebundle-processing"

# Labels applied on completion
success_labels:
  - "codebundle-generated"
  - "awaiting-review"

failure_labels:
  - "codebundle-failed"

# AI Configuration
ai:
  # AI service to use: "openai", "template", or "hybrid"
  service: "openai"
  
  # OpenAI settings
  openai:
    model: "gpt-4"
    max_tokens: 2000
    temperature: 0.3
    
  # Fallback to template generation if AI fails
  fallback_to_template: true
  
  # Use AI for specific components
  use_ai_for:
    scripts: true
    robot_tasks: true
    documentation: true
    cursorrules: false  # Keep template-based for consistency

# Reference Codebundles for AI Guidance
reference_codebundles:
  azure:
    network-security:
      - "azure-aks-triage"
      - "azure-appgateway-health"
    health:
      - "azure-acr-health"
      - "azure-appservice-webapp-health"
    triage:
      - "azure-aks-triage"
      - "azure-vm-triage"
  
  k8s:
    health:
      - "k8s-loki-healthcheck"
      - "k8s-fluxcd-helm-health"
    triage:
      - "k8s-kubectl-triage"
      - "k8s-pod-restart-triage"
  
  aws:
    health:
      - "aws-elasticache-redis-health"
      - "aws-rds-health"
    triage:
      - "aws-ec2-triage"
      - "aws-lambda-triage"

# Platform detection keywords
platforms:
  azure:
    keywords: ["azure", "az ", "aks", "acr", "nsg", "vnet", "resource group"]
    cli: "az"
  aws:
    keywords: ["aws", "eks", "ec2", "s3", "lambda", "vpc", "security group"]
    cli: "aws"
  gcp:
    keywords: ["gcp", "gke", "gcs", "google cloud", "compute engine"]
    cli: "gcloud"
  k8s:
    keywords: ["kubernetes", "k8s", "kubectl", "pod", "deployment", "service"]
    cli: "kubectl"

# Service type detection
service_types:
  network-security:
    keywords: ["firewall", "nsg", "network security", "security group", "acl"]
  network:
    keywords: ["network", "subnet", "vnet", "vpc", "routing", "dns"]
  storage:
    keywords: ["storage", "disk", "volume", "blob", "bucket"]
  database:
    keywords: ["database", "db", "sql", "nosql", "redis", "postgres"]
  compute:
    keywords: ["compute", "vm", "instance", "container", "serverless"]

# Purpose detection
purposes:
  integrity:
    keywords: ["integrity", "audit", "compliance", "validation", "verification"]
  health:
    keywords: ["health", "monitoring", "check", "status", "availability"]
  triage:
    keywords: ["triage", "troubleshoot", "debug", "diagnose", "investigate"]
  ops:
    keywords: ["ops", "operations", "management", "administration", "maintenance"]

# Default settings
defaults:
  max_tasks: 5
  max_similar_bundles: 3
  script_template_size_limit: 2000
  robot_template_size_limit: 2000
  max_reference_codebundles: 3

