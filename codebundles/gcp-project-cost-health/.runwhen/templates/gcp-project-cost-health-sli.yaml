apiVersion: runwhen.com/v1
kind: ServiceLevelIndicator
metadata:
  name: {{slx_name}}
  labels:
    {% include "common-labels.yaml" %}
  annotations:
    {% include "common-annotations.yaml" %}
spec:
  displayUnitsLong: Execution Status
  displayUnitsShort: status
  locations:
    - {{default_location}}
  description: Schedules daily execution of GCP cost health analysis runbook to monitor spending, network costs, and cost anomalies.
  codeBundle:
    repoUrl: https://github.com/runwhen-contrib/rw-workspace-utils.git
    ref: main
    pathToRobot: codebundles/cron-scheduler-sli/sli.robot
  intervalStrategy: intermezzo
  intervalSeconds: 300
  configProvided:
    - name: CRON_SCHEDULE
      value: "0 8 * * *" 
    - name: TARGET_SLX
      value: ""
    - name: DRY_RUN
      value: "false"
  secretsProvided: []
