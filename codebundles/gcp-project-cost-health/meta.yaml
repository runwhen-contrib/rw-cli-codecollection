commands:
- command: bash 'gcp_cost_historical_report.sh'
  doc_links: '

    - [GCP Billing Export Documentation](https://cloud.google.com/billing/docs/how-to/export-data-bigquery){:target="_blank"}

    - [BigQuery Documentation](https://cloud.google.com/bigquery/docs){:target="_blank"}

    - [GCP Cost Management](https://cloud.google.com/cost-management){:target="_blank"}

    - [Committed Use Discounts](https://cloud.google.com/compute/docs/instances/signing-up-committed-use-discounts){:target="_blank"}'
  explanation: This script analyzes GCP project costs by querying BigQuery billing export data. It generates comprehensive cost reports showing spending by project, service, and SKU over time. Includes time-series analysis (daily/weekly/monthly/quarterly) and automatic anomaly detection for cost spikes and deviations.
  multi_line_details: "\n#!/bin/bash\n\n# GCP Cost Historical Report Script\n# Queries BigQuery billing export for detailed cost analysis\n# Supports scoping to specific projects\n\nset -euo pipefail\n\n# Environment variables expected:\n# GCP_PROJECT_IDS - Comma-separated list of project IDs to analyze (required)\n# GCP_BILLING_EXPORT_TABLE - BigQuery table path (required): project.dataset.gcp_billing_export_v1_XXXXXX\n# COST_ANALYSIS_LOOKBACK_DAYS - Number of days to analyze (default: 30)\n\nThe script performs the following key functions:\n\n1. **Multi-Project Support**: Analyzes one or more GCP projects based on GCP_PROJECT_IDS\n2. **BigQuery Integration**: Queries billing export data for actual spending\n3. **Service Aggregation**: Groups costs by GCP service (Compute Engine, Storage, etc.)\n4. **SKU-Level Detail**: Provides granular cost breakdown by individual SKUs\n5. **Summary Statistics**: Calculates totals, averages, and cost contributors\n6. **Multiple Formats**: Generates table, CSV, and JSON output\n7. **Cost Optimization Tips**: Includes actionable recommendations\n\nKey Features:\n- Queries actual billing data from BigQuery export\n- Aggregates costs across multiple dimensions (project, service, SKU)\n- Identifies high-cost contributors (>20% of total)\n- Provides project-level and service-level breakdowns\n- Generates professional reports with summary tables\n- Handles authentication and permission checking\n- Gracefully handles projects with no data or insufficient permissions"
  name: generate_gcp_cost_report_by_service_and_project
  when_is_it_useful: '1. **Cost Visibility Initiatives**: When organizations need detailed visibility into GCP spending across multiple projects and services.


    2. **Multi-Project Management**: For teams managing multiple GCP projects who need consolidated cost views and comparisons.


    3. **Budget Planning**: When finance teams need accurate historical spending data to inform budget allocation and forecasting.


    4. **Cost Optimization Projects**: During cloud cost optimization initiatives to identify high-spend areas and opportunities for savings.


    5. **Regular Financial Reviews**: As part of monthly or quarterly financial reviews to track spending trends and validate budgets.


    6. **Chargeback/Showback**: For organizations implementing cost allocation models where project costs need to be tracked and reported to different teams or departments.


    7. **Cost Anomaly Detection**: To establish baseline spending patterns and identify unusual cost spikes or anomalies.


    8. **Service-Level Analysis**: When teams need to understand which GCP services (Compute, Storage, BigQuery, etc.) are driving costs.'
- command: bash 'gcp_network_cost_analysis.sh'
  doc_links: '

    - [GCP Network Pricing](https://cloud.google.com/vpc/network-pricing){:target="_blank"}

    - [Cloud CDN Pricing](https://cloud.google.com/cdn/pricing){:target="_blank"}

    - [Cloud Interconnect](https://cloud.google.com/network-connectivity/docs/interconnect){:target="_blank"}

    - [Network Cost Optimization](https://cloud.google.com/architecture/cost-optimization-for-networking){:target="_blank"}'
  explanation: This script performs specialized analysis of GCP network costs broken down by SKU. It tracks egress, ingress, CDN, VPN, and load balancing costs with time-series analysis showing daily spend for the last 7 days, weekly, monthly, and quarterly trends. Automatically detects network cost anomalies and spikes.
  multi_line_details: "\n#!/bin/bash\n\n# GCP Network Cost Analysis by SKU\n# Specialized analysis of network-related costs\n\nset -euo pipefail\n\n# Environment variables expected:\n# GCP_PROJECT_IDS - Comma-separated list of project IDs to analyze (optional)\n# GCP_BILLING_EXPORT_TABLE - BigQuery table path (auto-discovered if not provided)\n# OUTPUT_FORMAT - Output format: table, csv, json, or all (default: all)\n# NETWORK_COST_THRESHOLD_MONTHLY - Minimum monthly cost (USD) to trigger alerts (default: 50)"\n\nThe script performs the following key functions:\n\n1. **Network-Specific Analysis**: Focuses on network egress, ingress, and data transfer costs\n2. **SKU-Level Breakdown**: Detailed costs by network SKU (egress by region, CDN costs, etc.)\n3. **Time-Series Tracking**: Shows daily spend for last 7 days, plus weekly/monthly/quarterly totals\n4. **Cost Anomaly Detection**: Identifies network cost spikes (2x daily average) and deviations\n5. **Project Attribution**: Shows which projects are generating network costs\n6. **Optimization Insights**: Provides actionable recommendations for reducing egress costs\n7. **Multiple Output Formats**: Generates table, CSV, and JSON reports\n\nKey Features:\n- Filters billing data for network-related services (Network, VPC, CDN, VPN, etc.)\n- Aggregates costs by SKU, project, and time period\n- Detects unusual traffic patterns and cost spikes\n- Identifies when weekly costs exceed monthly trends by 50%+\n- Generates issues for significant network cost anomalies\n- Provides context on network usage patterns\n- Includes tips for network cost optimization (CDN, Interconnect, etc.)"
  name: analyze_gcp_network_costs_by_sku
  when_is_it_useful: '1. **Network Cost Optimization**: When teams need to understand and reduce network egress and data transfer costs.


    2. **Traffic Pattern Analysis**: For identifying unusual network traffic patterns or unexpected data transfers.


    3. **Multi-Region Deployments**: When analyzing costs across different regions and understanding inter-region transfer costs.


    4. **CDN and Edge Services**: For tracking Cloud CDN, Cloud Armor, and edge service costs separately.


    5. **Cost Spike Investigation**: When investigating sudden increases in network-related charges.


    6. **Architecture Reviews**: During architecture reviews to understand network cost implications of design decisions.


    7. **Budget Planning**: For forecasting network costs based on historical traffic patterns and trends.


    8. **Vendor Comparison**: When comparing GCP network costs to other cloud providers or planning migrations.'



