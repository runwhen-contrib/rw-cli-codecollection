commands:
- command: kubectl exec statefulset/${STATEFULSET_NAME} --context=${CONTEXT} -n ${NAMESPACE}
    -- curl -k --max-time 10 http://localhost:8091/artifactory/api/v1/system/liveness
  doc_links: '

    - [kubectl Reference Documentation](https://kubernetes.io/docs/reference/kubectl/overview/){:target="_blank"}

    - [Kubernetes StatefulSets Documentation](https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/){:target="_blank"}

    - [curl Manual](https://curl.se/docs/manual.html){:target="_blank"}

    - [kubectl Contexts Documentation](https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/){:target="_blank"}

    - [curl man page](https://linux.die.net/man/1/curl){:target="_blank"}'
  explanation: This command uses kubectl to execute a command within the specified
    statefulset in the given namespace, sending a curl request to check the liveness
    of a service running on localhost. It also includes parameters such as --context
    and --max-time to specify the context and maximum time for the request.
  multi_line_details: '# Assign the statefulset name, context, and namespace to variables

    STATEFULSET_NAME="example"

    CONTEXT="example-context"

    NAMESPACE="example-namespace"


    # Use kubectl to execute a command within a pod in the specified statefulset,
    context, and namespace

    # The command will use curl to make a request to the specified URL with a maximum
    timeout of 10 seconds

    kubectl exec statefulset/${STATEFULSET_NAME} --context=${CONTEXT} -n ${NAMESPACE}
    -- curl -k --max-time 10 http://localhost:8091/artifactory/api/v1/system/liveness'
  name: check_artifactory_liveness_and_readiness_endpoints
- command: kubectl exec statefulset/${STATEFULSET_NAME} --context=${CONTEXT} -n ${NAMESPACE}
    -- curl -k --max-time 10 http://localhost:8091/artifactory/api/v1/system/readiness
  doc_links: '

    - [kubectl](https://kubernetes.io/docs/reference/kubectl/overview/){:target="_blank"}

    - [statefulset](https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/){:target="_blank"}

    - [namespace](https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/){:target="_blank"}

    - [context](https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/){:target="_blank"}

    - [curl command](https://curl.se/docs/manpage.html){:target="_blank"}

    - [Artifactory API](https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API){:target="_blank"}'
  explanation: This command uses kubectl to execute a command within a specific statefulset
    in a given namespace, using a specific context. In this case, it is running a
    curl command to check the readiness of an Artifactory API within the specified
    statefulset.
  multi_line_details: '# Set the statefulset name as a variable

    STATEFULSET_NAME=statefulset/${STATEFULSET_NAME}


    # Set the context as a variable

    CONTEXT=${CONTEXT}


    # Set the namespace as a variable

    NAMESPACE=${NAMESPACE}


    # Use kubectl to execute a command in a pod/container within the specified statefulset,
    context, and namespace

    kubectl exec $STATEFULSET_NAME --context=$CONTEXT -n $NAMESPACE -- curl -k --max-time
    10 http://localhost:8091/artifactory/api/v1/system/readiness'
  name: check_artifactory_liveness_and_readiness_endpoints
