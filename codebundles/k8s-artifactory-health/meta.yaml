commands:
- command: kubectl exec statefulset/${STATEFULSET_NAME} --context=${CONTEXT} -n ${NAMESPACE}
    -- curl -k --max-time 10 http://localhost:8091/artifactory/api/v1/system/liveness
  doc_links: '

    - [kubectl Reference Documentation](https://kubernetes.io/docs/reference/kubectl/overview/){:target="_blank"}

    - [Kubernetes StatefulSets Documentation](https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/){:target="_blank"}

    - [curl Manual](https://curl.se/docs/manual.html){:target="_blank"}

    - [kubectl Contexts Documentation](https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/){:target="_blank"}

    - [curl man page](https://linux.die.net/man/1/curl){:target="_blank"}'
  explanation: This command uses kubectl to execute a command within the specified
    statefulset in the given namespace, sending a curl request to check the liveness
    of a service running on localhost. It also includes parameters such as --context
    and --max-time to specify the context and maximum time for the request.
  multi_line_details: '# Set the kubectl context to the specified CONTEXT and execute
    a command inside a pod

    # belonging to the STATEFULSET_NAME in the NAMESPACE

    kubectl exec statefulset/${STATEFULSET_NAME} \

    --context=${CONTEXT} \

    -n ${NAMESPACE} \

    -- curl -k --max-time 10 http://localhost:8091/artifactory/api/v1/system/liveness'
  name: check_artifactory_liveness_and_readiness_endpoints
- command: kubectl exec statefulset/${STATEFULSET_NAME} --context=${CONTEXT} -n ${NAMESPACE}
    -- curl -k --max-time 10 http://localhost:8091/artifactory/api/v1/system/readiness
  doc_links: '

    - [kubectl](https://kubernetes.io/docs/reference/kubectl/overview/){:target="_blank"}

    - [statefulset](https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/){:target="_blank"}

    - [namespace](https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/){:target="_blank"}

    - [context](https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/){:target="_blank"}

    - [curl command](https://curl.se/docs/manpage.html){:target="_blank"}

    - [Artifactory API](https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API){:target="_blank"}'
  explanation: This command uses kubectl to execute a command within a specific statefulset
    in a given namespace, using a specific context. In this case, it is running a
    curl command to check the readiness of an Artifactory API within the specified
    statefulset.
  multi_line_details: "# Store the statefulset name, context, and namespace in respective\
    \ variables for better readability\nSTATEFULSET_NAME=\"my-statefulset\"\nCONTEXT=\"\
    my-context\"\nNAMESPACE=\"my-namespace\"\n\n# Use kubectl exec to run a curl command\
    \ inside the specified statefulset\n# Use the stored variables to specify the\
    \ statefulset, context, and namespace\n# The curl command checks the readiness\
    \ of an artifactory API endpoint\nkubectl exec statefulset/${STATEFULSET_NAME}\
    \ --context=${CONTEXT} -n ${NAMESPACE} -- \\\n  curl -k --max-time 10 http://localhost:8091/artifactory/api/v1/system/readiness"
  name: check_artifactory_liveness_and_readiness_endpoints
